<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gestion des Poids</title>
  <meta name="description" content="Gestion des poids des objets et inventaires par cat√©gories">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="content fade-in">
    <!-- En-t√™te de la page -->
    <header class="page-header">
      <h1>üèãÔ∏è Gestion des Poids</h1>
      <p class="page-subtitle">G√©rez vos inventaires par poids avec cat√©gories et poids port√©</p>
    </header>

    <!-- Section Ajout d'objets - CTA avec pop-in -->
    <section class="section">
      <div class="cta-container">
        <div class="cta-content">
          <h2>‚ûï Cr√©er un nouvel objet</h2>
          <p>Ajoutez vos propres objets avec leur poids dans une cat√©gorie</p>
          <button onclick="ouvrirPopinAjout()" class="cta-button">
            ‚ú® Ajouter un objet personnalis√©
          </button>
        </div>
        <div class="cta-icon">
          üì¶
        </div>
      </div>
    </section>

    <!-- Pop-in pour ajouter un objet -->
    <div id="popinAjout" class="popin-overlay" onclick="fermerPopinAjout()">
      <div class="popin-content" onclick="event.stopPropagation()">
        <div class="popin-header">
          <h2>‚ûï Nouvel objet</h2>
          <button onclick="fermerPopinAjout()" class="popin-close">‚úï</button>
        </div>
        
        <form class="popin-form" onsubmit="ajouterNouvelObjetPopin(event)">
          <div class="form-field">
            <label for="popinCategory">Cat√©gorie *</label>
            <select id="popinCategory" required>
              <!-- Options g√©n√©r√©es dynamiquement -->
            </select>
          </div>
          
          <div class="form-field">
            <label for="popinName">Nom de l'objet *</label>
            <input type="text" id="popinName" placeholder="Exemple: √âp√©e enchant√©e" required>
          </div>
          
          <div class="form-field">
            <label for="popinWeight">Poids (kg) *</label>
            <input type="number" id="popinWeight" step="0.1" min="0" placeholder="2.5" required>
          </div>
          
          <div class="form-field">
            <label for="popinDescription">Description (optionnel)</label>
            <textarea id="popinDescription" placeholder="Courte description de l'objet..." rows="3"></textarea>
          </div>
          
          <div class="popin-actions">
            <button type="button" onclick="fermerPopinAjout()" class="btn-cancel">
              Annuler
            </button>
            <button type="submit" class="btn-confirm">
              ‚úÖ Cr√©er l'objet
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Contr√¥les de fichier et total -->
    <div class="section">
      <div class="controls-row">
        <div class="file-controls">
          <input type="file" accept=".json" id="fileInputInventory" title="Charger un inventaire">
          <button id="saveInventoryBtn" title="Sauvegarder tous les inventaires">
            üíæ Sauvegarder Inventaires
          </button>
        </div>
        
        <div class="total-display">
          <span class="total-label">Poids total :</span>
          <span id="totalPoids" class="total-value">0</span>
          <span class="total-unit">kg</span>
        </div>
      </div>
    </div>

    <!-- Onglets des inventaires -->
    <section class="section">
      <div class="tabs-container">
        <div class="tabs-header">
          <button class="tab-button active" onclick="switchTab('dorusis')" title="Inventaire personnel de Dorusis">
            üë§ Dorusis
          </button>
          <button class="tab-button" onclick="switchTab('cheval')" title="Inventaire du cheval de trait">
            üê¥ Cheval de trait
          </button>
          <button class="tab-button" onclick="switchTab('guilde')" title="Inventaire collectif de la guilde">
            ‚öîÔ∏è Guilde
          </button>
        </div>

        <!-- Inventaire Dorusis -->
        <div id="tab-dorusis" class="tab-content active">
          <div class="tab-header">
            <h2>üë§ Inventaire Dorusis</h2>
            <div class="tab-actions">
              <button onclick="addInventaireRowPoids('dorusis')" class="btn-add-row">
                ‚ûï Ajouter un objet
              </button>
              <button onclick="ajouterDorusisAuCheval()" class="btn-transfer" title="Ajouter Dorusis (80kg + √©quipements) au cheval">
                üê¥ Monter sur le cheval
              </button>
            </div>
          </div>
          
          <div class="table-container">
            <table id="inventaireTableDorusis" class="inventory-table">
              <thead>
                <tr>
                  <th width="15%">Cat√©gorie</th>
                  <th width="20%">Objet</th>
                  <th width="10%">Quantit√©</th>
                  <th width="12%">Poids unit.</th>
                  <th width="15%">Poids port√©</th>
                  <th width="12%">Total</th>
                  <th width="16%">Actions</th>
                </tr>
              </thead>
              <tbody>
                <!-- Lignes g√©n√©r√©es dynamiquement -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Inventaire Cheval -->
        <div id="tab-cheval" class="tab-content">
          <div class="tab-header">
            <h2>üê¥ Inventaire Cheval de trait</h2>
            <div class="tab-actions">
              <button onclick="addInventaireRowPoids('cheval')" class="btn-add-row">
                ‚ûï Ajouter un objet
              </button>
              <button onclick="retirerDorusis()" class="btn-remove" title="Retirer Dorusis du cheval">
                üë§ Descendre du cheval
              </button>
            </div>
          </div>
          
          <div class="table-container">
            <table id="inventaireTableCheval" class="inventory-table">
              <thead>
                <tr>
                  <th width="15%">Cat√©gorie</th>
                  <th width="20%">Objet</th>
                  <th width="10%">Quantit√©</th>
                  <th width="12%">Poids unit.</th>
                  <th width="15%">Poids port√©</th>
                  <th width="12%">Total</th>
                  <th width="16%">Actions</th>
                </tr>
              </thead>
              <tbody>
                <!-- Lignes g√©n√©r√©es dynamiquement -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Inventaire Guilde -->
        <div id="tab-guilde" class="tab-content">
          <div class="tab-header">
            <h2>‚öîÔ∏è Inventaire Guilde</h2>
            <button onclick="addInventaireRowPoids('guilde')" class="btn-add-row">
              ‚ûï Ajouter un objet
            </button>
          </div>
          
          <div class="table-container">
            <table id="inventaireTableGuilde" class="inventory-table">
              <thead>
                <tr>
                  <th width="15%">Cat√©gorie</th>
                  <th width="20%">Objet</th>
                  <th width="10%">Quantit√©</th>
                  <th width="12%">Poids unit.</th>
                  <th width="15%">Poids port√©</th>
                  <th width="12%">Total</th>
                  <th width="16%">Actions</th>
                </tr>
              </thead>
              <tbody>
                <!-- Lignes g√©n√©r√©es dynamiquement -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- Liste des objets par cat√©gories (consultation uniquement) -->
    <section class="section">
      <h2>üìã Liste des objets par cat√©gories</h2>
      
      <!-- Filtres et recherche -->
      <div class="filters-row">
        <div class="filter-group">
          <label for="categoryFilter">Cat√©gorie :</label>
          <select id="categoryFilter" onchange="filtrerParCategorie(this.value)">
            <option value="">Toutes les cat√©gories</option>
            <!-- Options g√©n√©r√©es dynamiquement -->
          </select>
        </div>
        
        <div class="search-group">
          <label for="searchObjects">Rechercher :</label>
          <input type="text" id="searchObjects" placeholder="Nom de l'objet..." 
                 oninput="rechercherObjets(this.value)">
        </div>
      </div>
      
      <!-- Conteneur des cat√©gories -->
      <div class="categories-container" id="categoriesContainer">
        <!-- Cat√©gories g√©n√©r√©es dynamiquement par JavaScript -->
      </div>
    </section>
  </div>

  <!-- Scripts -->
  <script src="data.js"></script>
  <script src="script.js"></script>
  <script src="poids.js"></script>
  <script src="nav.js"></script>
</body>
</html>